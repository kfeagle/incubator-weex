<template>
    <div>
        <text style="font-size: 60px;" @click="add">支持点击交互</text>
        <scene ref="scene" style="height: 1100;width: 750" @tap="tap" @contact="contact"></scene>
    </div>
</template>

<script>
    module.exports = {
        data: function () {
            return {

                ship: {
                    name: 'ship',
                    width: 0.1,
                    height: 0.1,
                    length: 0.1,
                    PhysicsBodyType: 1,
                    affectedByGravity: false,
                    categoryBitMask: 0,
                    contactTestBitMask: 1,
                    chamferRadius: 0,
                    materialsCount: 6,
                    vector: {
                        x: Math.random(),
                        y: Math.random(),
                        z: -1
                    },
                    contents: {
                        type: 'image',
                        src: 'https://github.com/kfeagle/firstdemo/blob/master/galaxy.png?raw=true'
                    }
                },
                ball: {
                    name:'ball',
                    type:'sphere',
                    radius:'0.025',
                    categoryBitMask:1,
                    contactTestBitMask:0,
                    PhysicsBodyType:1,
                    affectedByGravity:false,
                    contents:{
                        type:'image',
                        src:'https://github.com/kfeagle/firstdemo/blob/master/bullet.jpg?raw=true'
                    },
                },

            };
        },
        mounted: function () {
            console.log('Data observation finished')
            this.$refs['scene'].addNode(this.ship
            );
        },
        methods: {
            tap:function (event) {
                this.$refs['scene'].addNode(this.ball);
            },
            contact:function (event) {
                if(event.nodes.nodeA.mask == 0 || event.nodes.nodeB.mask == 0 ){
                    this.$refs['scene'].removeNode(event.nodes.nodeA.name);
                    this.$refs['scene'].removeNode(event.nodes.nodeB.name);
                    this.ship.vector.x = Math.random();
                    this.ship.vector.y = Math.random();
                    this.$refs['scene'].addNode(this.ship);
                }

            }
        }
    }
</script>